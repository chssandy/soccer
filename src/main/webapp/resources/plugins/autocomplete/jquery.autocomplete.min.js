!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports&&"function"==typeof require?a(require("jquery")):a(jQuery)}(function(a){"use strict";function d(b,c){var e=function(){},f=this,g={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:d.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:e,onSearchComplete:e,onSearchError:e,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(a,b,c){return-1!==a.value.toLowerCase().indexOf(c)},paramName:"query",transformResult:function(b){return"string"==typeof b?a.parseJSON(b):b},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1,useButton:null};f.element=b,f.el=a(b),f.suggestions=[],f.badQueries=[],f.selectedIndex=-1,f.currentValue=f.element.value,f.intervalId=0,f.cachedResponse={},f.onChangeInterval=null,f.onChange=null,f.isLocal=!1,f.suggestionsContainer=null,f.noSuggestionsContainer=null,f.options=a.extend({},g,c),f.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},f.hint=null,f.hintValue="",f.selection=null,f.initialize(),f.setOptions(c)}var b=function(){return{escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(a){var b=document.createElement("div");return b.className=a,b.style.position="absolute",b.style.display="none",b}}}(),c={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40};d.utils=b,a.Autocomplete=d,d.formatResult=function(a,c){var d=a.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),e="("+b.escapeRegExChars(c)+")";return d.replace(new RegExp(e,"gi"),"<strong>$1</strong>")},d.prototype={killerFn:null,initialize:function(){var g,b=this,c="."+b.classes.suggestion,e=b.classes.selected,f=b.options;b.element.setAttribute("autocomplete","off"),b.killerFn=function(c){0===a(c.target).closest("."+b.options.containerClass).length&&(b.killSuggestions(),b.disableKillerFn())},b.noSuggestionsContainer=a('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),b.suggestionsContainer=d.utils.createNode(f.containerClass),g=a(b.suggestionsContainer),g.appendTo(f.appendTo),"auto"!==f.width&&g.width(f.width),g.on("mouseover.autocomplete",c,function(){b.activate(a(this).data("index"))}),g.on("mouseout.autocomplete",function(){b.selectedIndex=-1,g.children("."+e).removeClass(e)}),g.on("click.autocomplete",c,function(){b.select(a(this).data("index"))}),b.fixPositionCapture=function(){b.visible&&b.fixPosition()},a(window).on("resize.autocomplete",b.fixPositionCapture),b.el.on("keydown.autocomplete",function(a){b.onKeyPress(a)}),b.el.on("keyup.autocomplete",function(a){b.onKeyUp(a)}),b.el.on("blur.autocomplete",function(){b.onBlur()}),b.el.on("focus.autocomplete",function(){b.onFocus()}),b.el.on("change.autocomplete",function(a){b.onKeyUp(a)}),b.el.on("input.autocomplete",function(a){b.onKeyUp(a)}),f.useButton&&f.useButton.on("click",function(){b.onButtonClick()})},onFocus:function(){var a=this;a.fixPosition(),0===a.options.minChars&&0===a.el.val().length&&a.onValueChange()},onBlur:function(){this.options.useButton||this.enableKillerFn()},abortAjax:function(){var a=this;a.currentRequest&&(a.currentRequest.abort(),a.currentRequest=null)},setOptions:function(b){var c=this,d=c.options;a.extend(d,b),c.isLocal=a.isArray(d.lookup),c.isLocal&&(d.lookup=c.verifySuggestionsFormat(d.lookup)),d.orientation=c.validateOrientation(d.orientation,"bottom"),a(c.suggestionsContainer).css({"max-height":d.maxHeight+"px",width:d.width+"px","z-index":d.zIndex})},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var a=this;a.disabled=!0,clearInterval(a.onChangeInterval),a.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var b=this,c=a(b.suggestionsContainer),d=c.parent().get(0);if(d===document.body||b.options.forceFixPosition){var e=b.options.orientation,f=c.outerHeight(),g=b.el.outerHeight(),h=b.el.offset(),i={top:h.top,left:h.left};if("auto"===e){var j=a(window).height(),k=a(window).scrollTop(),l=-k+h.top-f,m=k+j-(h.top+g+f);e=Math.max(l,m)===l?"top":"bottom"}if(i.top+="top"===e?-f:g,d!==document.body){var o,n=c.css("opacity");b.visible||c.css("opacity",0).show(),o=c.offsetParent().offset(),i.top-=o.top,i.left-=o.left,b.visible||c.css("opacity",n).hide()}"auto"===b.options.width&&(i.width=b.el.outerWidth()-2+"px"),c.css(i)}},enableKillerFn:function(){var b=this;a(document).on("click.autocomplete",b.killerFn)},disableKillerFn:function(){var b=this;a(document).off("click.autocomplete",b.killerFn)},killSuggestions:function(){var a=this;a.stopKillSuggestions(),a.intervalId=window.setInterval(function(){a.hide(),a.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var d,a=this,b=a.el.val().length,c=a.element.selectionStart;return"number"==typeof c?c===b:document.selection?(d=document.selection.createRange(),d.moveStart("character",-b),b===d.text.length):!0},onKeyPress:function(a){var b=this;if(!b.disabled&&!b.visible&&a.which===c.DOWN&&b.currentValue)return b.suggest(),void 0;if(!b.disabled&&b.visible){switch(a.which){case c.ESC:b.el.val(b.currentValue),b.hide();break;case c.RIGHT:if(b.hint&&b.options.onHint&&b.isCursorAtEnd()){b.selectHint();break}return;case c.TAB:if(b.hint&&b.options.onHint)return b.selectHint(),void 0;if(-1===b.selectedIndex)return b.hide(),void 0;if(b.select(b.selectedIndex),b.options.tabDisabled===!1)return;break;case c.RETURN:if(-1===b.selectedIndex)return b.hide(),void 0;b.select(b.selectedIndex);break;case c.UP:b.moveUp();break;case c.DOWN:b.moveDown();break;default:return}a.stopImmediatePropagation(),a.preventDefault()}},onKeyUp:function(a){var b=this;if(!b.disabled){switch(a.which){case c.UP:case c.DOWN:return}clearInterval(b.onChangeInterval),b.currentValue!==b.el.val()&&(b.findBestHint(),b.options.deferRequestBy>0?b.onChangeInterval=setInterval(function(){b.onValueChange()},b.options.deferRequestBy):b.onValueChange())}},onButtonClick:function(){var b=this,c=b.options,d=b.el.val(),e=b.getQuery(d);return b.selection&&b.currentValue!==e&&(b.selection=null,(c.onInvalidateSelection||a.noop).call(b.element)),clearInterval(b.onChangeInterval),b.currentValue=d,b.selectedIndex=-1,c.triggerSelectOnValidInput&&b.isExactMatch(e)?(b.select(0),void 0):(e.length<c.minChars?b.hide():b.getSuggestions(e),void 0)},onValueChange:function(){var b=this,c=b.options,d=b.el.val(),e=b.getQuery(d);return c.useButton?(b.hide(),void 0):(b.selection&&b.currentValue!==e&&(b.selection=null,(c.onInvalidateSelection||a.noop).call(b.element)),clearInterval(b.onChangeInterval),b.currentValue=d,b.selectedIndex=-1,c.triggerSelectOnValidInput&&b.isExactMatch(e)?(b.select(0),void 0):(e.length<c.minChars?b.hide():b.getSuggestions(e),void 0))},isExactMatch:function(a){var b=this.suggestions;return 1===b.length&&b[0].value.toLowerCase()===a.toLowerCase()},getQuery:function(b){var d,c=this.options.delimiter;return c?(d=b.split(c),a.trim(d[d.length-1])):b},getSuggestionsLocal:function(b){var h,c=this,d=c.options,e=b.toLowerCase(),f=d.lookupFilter,g=parseInt(d.lookupLimit,10);return h={suggestions:a.grep(d.lookup,function(a){return f(a,b,e)})},g&&h.suggestions.length>g&&(h.suggestions=h.suggestions.slice(0,g)),h},getSuggestions:function(b){var c,g,h,i,d=this,e=d.options,f=e.serviceUrl;if(e.params[e.paramName]=b,g=e.ignoreParams?null:e.params,e.onSearchStart.call(d.element,e.params)!==!1){if(a.isFunction(e.lookup))return e.lookup(b,function(a){d.suggestions=a.suggestions,d.suggest(),e.onSearchComplete.call(d.element,b,a.suggestions)}),void 0;d.isLocal?c=d.getSuggestionsLocal(b):(a.isFunction(f)&&(f=f.call(d.element,b)),h=f+"?"+a.param(g||{}),c=d.cachedResponse[h]),c&&a.isArray(c.suggestions)?(d.suggestions=c.suggestions,d.suggest(),e.onSearchComplete.call(d.element,b,c.suggestions)):d.isBadQuery(b)?e.onSearchComplete.call(d.element,b,[]):(d.abortAjax(),i={url:f,data:g,type:e.type,dataType:e.dataType},a.extend(i,e.ajaxSettings),d.currentRequest=a.ajax(i).done(function(a){var c;d.currentRequest=null,c=e.transformResult(a,b),d.processResponse(c,b,h),e.onSearchComplete.call(d.element,b,c.suggestions)}).fail(function(a,c,f){e.onSearchError.call(d.element,b,a,c,f)}))}},isBadQuery:function(a){if(!this.options.preventBadQueries)return!1;for(var b=this.badQueries,c=b.length;c--;)if(0===a.indexOf(b[c]))return!0;return!1},hide:function(){var b=this,c=a(b.suggestionsContainer);a.isFunction(b.options.onHide)&&b.visible&&b.options.onHide.call(b.element,c),b.visible=!1,b.selectedIndex=-1,clearInterval(b.onChangeInterval),a(b.suggestionsContainer).hide(),b.signalHint(null)},suggest:function(){if(0===this.suggestions.length)return this.options.showNoSuggestionNotice?this.noSuggestions():this.hide(),void 0;var m,b=this,c=b.options,d=c.groupBy,e=c.formatResult,f=b.getQuery(b.currentValue),g=b.classes.suggestion,h=b.classes.selected,i=a(b.suggestionsContainer),j=a(b.noSuggestionsContainer),k=c.beforeRender,l="",n=function(a){var c=a.data[d];return m===c?"":(m=c,'<div class="autocomplete-group"><strong>'+m+"</strong></div>")};return c.triggerSelectOnValidInput&&b.isExactMatch(f)?(b.select(0),void 0):(a.each(b.suggestions,function(a,b){d&&(l+=n(b,f,a)),l+='<div class="'+g+'" data-index="'+a+'">'+e(b,f)+"</div>"}),this.adjustContainerWidth(),j.detach(),i.html(l),a.isFunction(k)&&k.call(b.element,i),b.fixPosition(),i.show(),c.autoSelectFirst&&(b.selectedIndex=0,i.scrollTop(0),i.children("."+g).first().addClass(h)),b.visible=!0,b.findBestHint(),void 0)},noSuggestions:function(){var b=this,c=a(b.suggestionsContainer),d=a(b.noSuggestionsContainer);this.adjustContainerWidth(),d.detach(),c.empty(),c.append(d),b.fixPosition(),c.show(),b.visible=!0},adjustContainerWidth:function(){var d,b=this,c=b.options,e=a(b.suggestionsContainer);"auto"===c.width&&(d=b.el.outerWidth()-2,e.width(d>0?d:300))},findBestHint:function(){var b=this,c=b.el.val().toLowerCase(),d=null;c&&(a.each(b.suggestions,function(a,b){var e=0===b.value.toLowerCase().indexOf(c);return e&&(d=b),!e}),b.signalHint(d))},signalHint:function(b){var c="",d=this;b&&(c=d.currentValue+b.value.substr(d.currentValue.length)),d.hintValue!==c&&(d.hintValue=c,d.hint=b,(this.options.onHint||a.noop)(c))},verifySuggestionsFormat:function(b){return b.length&&"string"==typeof b[0]?a.map(b,function(a){return{value:a,data:null}}):b},validateOrientation:function(b,c){return b=a.trim(b||"").toLowerCase(),-1===a.inArray(b,["auto","bottom","top"])&&(b=c),b},processResponse:function(a,b,c){var d=this,e=d.options;a.suggestions=d.verifySuggestionsFormat(a.suggestions),e.noCache||(d.cachedResponse[c]=a,e.preventBadQueries&&0===a.suggestions.length&&d.badQueries.push(b)),b===d.getQuery(d.currentValue)&&(d.suggestions=a.suggestions,d.suggest())},activate:function(b){var d,c=this,e=c.classes.selected,f=a(c.suggestionsContainer),g=f.find("."+c.classes.suggestion);return f.find("."+e).removeClass(e),c.selectedIndex=b,-1!==c.selectedIndex&&g.length>c.selectedIndex?(d=g.get(c.selectedIndex),a(d).addClass(e),d):null},selectHint:function(){var b=this,c=a.inArray(b.hint,b.suggestions);b.select(c)},select:function(a){var b=this;b.hide(),b.onSelect(a)},moveUp:function(){var b=this;if(-1!==b.selectedIndex)return 0===b.selectedIndex?(a(b.suggestionsContainer).children().first().removeClass(b.classes.selected),b.selectedIndex=-1,b.el.val(b.currentValue),b.findBestHint(),void 0):(b.adjustScroll(b.selectedIndex-1),void 0)},moveDown:function(){var a=this;a.selectedIndex!==a.suggestions.length-1&&a.adjustScroll(a.selectedIndex+1)},adjustScroll:function(b){var c=this,d=c.activate(b);if(d){var e,f,g,h=a(d).outerHeight();e=d.offsetTop,f=a(c.suggestionsContainer).scrollTop(),g=f+c.options.maxHeight-h,f>e?a(c.suggestionsContainer).scrollTop(e):e>g&&a(c.suggestionsContainer).scrollTop(e-c.options.maxHeight+h),c.options.preserveInput||c.el.val(c.getValue(c.suggestions[b].value)),c.signalHint(null)}},onSelect:function(b){var c=this,d=c.options.onSelect,e=c.suggestions[b];c.currentValue=c.getValue(e.value),c.currentValue===c.el.val()||c.options.preserveInput||c.el.val(c.currentValue),c.signalHint(null),c.suggestions=[],c.selection=e,a.isFunction(d)&&d.call(c.element,e)},getValue:function(a){var d,e,b=this,c=b.options.delimiter;return c?(d=b.currentValue,e=d.split(c),1===e.length?a:d.substr(0,d.length-e[e.length-1].length)+a):a},dispose:function(){var b=this;b.el.off(".autocomplete").removeData("autocomplete"),b.disableKillerFn(),a(window).off("resize.autocomplete",b.fixPositionCapture),a(b.suggestionsContainer).remove()}},a.fn.autocomplete=a.fn.devbridgeAutocomplete=function(b,c){var e="autocomplete";return 0===arguments.length?this.first().data(e):this.each(function(){var f=a(this),g=f.data(e);"string"==typeof b?g&&"function"==typeof g[b]&&g[b](c):(g&&g.dispose&&g.dispose(),g=new d(this,b),f.data(e,g))})}});