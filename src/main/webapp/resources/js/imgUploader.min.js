Uploader=function(a){var b={contextPath:"",upload_url:a.contextPath+"/system/public/uploadImage",button_placeholder_id:"",flash_url:a.contextPath+"/resource/plugins/plupload-2.1.2/js/Moxie.swf",limit:"1",type:"",max_file_size:"2mb",success_callback:function(){},fileDialogCompleteFun:function(){return!0},uploadProgress:function(){}};if(""==a.contextPath)return!1;if(!(arguments.length>0&&"object"==typeof arguments[0]))return!1;$.extend(b,a);var c=new plupload.Uploader({runtimes:"html5,flash,html4",browse_button:b.button_placeholder_id,url:b.upload_url,flash_swf_url:b.flash_url,multi_selection:b.limit>1?!0:!1,multipart_params:{type:b.type,action:"uploadimage"},filters:{max_file_size:b.max_file_size,mime_types:[{title:"Image files",extensions:"jpg,jpeg,png"}]},init:{PostInit:function(){},FilesAdded:function(a,d){var e=!0;"function"==typeof b.fileDialogCompleteFun&&(e=b.fileDialogCompleteFun(a,d)),e&&c.start()},FileUploaded:function(a,c,d){b.success_callback(a,c,d)},UploadProgress:function(a,c){b.uploadProgress(a,c)},Error:function(uploader,errObject){var message='图片不符合规格！';if(errObject.code=='-600'){message='图片大小不符合规格！'}else if(errObject.code=='-601'){message='文件格式不正确！'}b.error_callback(message)}}});return c.init(),c};